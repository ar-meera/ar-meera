<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meera — Urban Design (Optimized)</title>
  <style>
    :root{--nav-height:64px;--g-gap:18px;--bg:#0b0b0b}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:Century Gothic,Segoe UI,Arial,sans-serif}

    /* NAVBAR */
    .navbar{position:fixed;top:0;left:0;right:0;height:var(--nav-height);display:flex;align-items:center;gap:14px;padding:0 20px;background:rgba(0,0,0,0.95);z-index:1000}
    .title{display:flex;flex-direction:column}
    .urban{font-size:20px;letter-spacing:1px;text-transform:uppercase;font-weight:700}
    .location-year{font-size:13px;opacity:0.9}

    /* GALLERY */
    .gallery-wrap{padding:calc(var(--nav-height) + 20px) 18px 100px;max-width:1400px;margin:0 auto}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--g-gap)}
    .gallery-item{position:relative;height:220px;overflow:hidden;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.6);background:#111}
    .gallery-item img{width:100%;height:100%;object-fit:cover;display:block;user-select:none;pointer-events:none}
    /* click-overlay to block right-click/save directly on thumbnails */
    .click-overlay{position:absolute;inset:0;z-index:2;background:transparent}

    /* popup */
    .popup{display:none;position:fixed;inset:0;align-items:center;justify-content:center;padding:20px;z-index:2000}
    .popup.visible{display:flex;background:linear-gradient(180deg,rgba(0,0,0,0.65),rgba(0,0,0,0.9))}
    .popup-content{position:relative;max-width:1100px;width:100%;max-height:90vh;display:flex;align-items:center;justify-content:center}
    .popup-image{max-width:100%;max-height:100%;border:6px solid #fff;box-shadow:0 20px 40px rgba(0,0,0,0.7);user-select:none;pointer-events:none}

    .nav-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.45);border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:22px;color:#fff}
    .nav-prev{left:8px}
    .nav-next{right:8px}
    .close-btn{position:absolute;top:12px;right:12px;background:rgba(0,0,0,0.4);width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer}

    footer{position:fixed;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);padding:10px 14px;text-align:center;font-size:15px}

    /* responsive */
    @media (max-width:900px){.gallery{grid-template-columns:repeat(2,1fr)}.gallery-item{height:200px}}
    @media (max-width:480px){.gallery{grid-template-columns:1fr}.urban{font-size:18px}.location-year{font-size:12px}.gallery-item{height:180px}}
  </style>
</head>
<body>
  <header class="navbar">
    <div class="title">
      <span class="urban">URBAN DESIGN</span>
      <span class="location-year">Thripunithura 2017</span>
    </div>
  </header>

  <main class="gallery-wrap">
    <div id="gallery" class="gallery" aria-live="polite"></div>
  </main>

  <!-- POPUP VIEWER -->
  <div id="popup" class="popup" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="popup-content">
      <button class="close-btn" id="closeBtn" aria-label="Close (Esc)">✕</button>
      <button class="nav-btn nav-prev" id="prevBtn" aria-label="Previous (Left)">◀</button>
      <img id="popupImage" class="popup-image" src="" alt="Expanded view">
      <button class="nav-btn nav-next" id="nextBtn" aria-label="Next (Right)">▶</button>
    </div>
  </div>

  <footer>meera ramesh | © B.Arch RIT 2013-18</footer>

  <script>
    (function(){
      const TOTAL = 53; // as requested
      const gallery = document.getElementById('gallery');
      // Build gallery items programmatically
      for(let i=1;i<=TOTAL;i++){
        const item = document.createElement('div');
        item.className = 'gallery-item';
        item.dataset.index = i-1;

        // Use simple filename pattern UD1.jpg ... UD53.jpg
        const img = document.createElement('img');
        img.loading = 'lazy';
        img.alt = `Urban Design ${i}`;
        img.src = `UD${i}.jpg`;
        img.decoding = 'async';

        const overlay = document.createElement('a');
        overlay.className = 'click-overlay';
        overlay.href = '#';
        overlay.addEventListener('click', (e)=>{
          e.preventDefault();
          openPopup(parseInt(item.dataset.index,10));
        });
        // Prevent context menu on overlay
        overlay.addEventListener('contextmenu', e=>e.preventDefault());

        item.appendChild(img);
        item.appendChild(overlay);
        gallery.appendChild(item);
      }

      // Popup logic
      const popup = document.getElementById('popup');
      const popupImage = document.getElementById('popupImage');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const closeBtn = document.getElementById('closeBtn');
      let current = 0;
      const items = document.querySelectorAll('.gallery-item');
      function openPopup(index){
        current = index;
        popupImage.src = `UD${current+1}.jpg`;
        popup.classList.add('visible');
        popup.setAttribute('aria-hidden','false');
        // lock scroll
        document.body.style.overflow = 'hidden';
      }
      function closePopup(){
        popup.classList.remove('visible');
        popup.setAttribute('aria-hidden','true');
        popupImage.src = '';
        document.body.style.overflow = '';
      }
      function showNext(){ current = (current+1) % items.length; popupImage.src = `UD${current+1}.jpg`; }
      function showPrev(){ current = (current-1+items.length) % items.length; popupImage.src = `UD${current+1}.jpg`; }

      // Buttons
      nextBtn.addEventListener('click', showNext);
      prevBtn.addEventListener('click', showPrev);
      closeBtn.addEventListener('click', closePopup);

      // Keyboard
      document.addEventListener('keydown', (e)=>{
        if(popup.classList.contains('visible')){
          if(e.key === 'ArrowRight') { e.preventDefault(); showNext(); }
          else if(e.key === 'ArrowLeft') { e.preventDefault(); showPrev(); }
          else if(e.key === 'Escape') { e.preventDefault(); closePopup(); }
        }
        // block common save / inspect combos
        if((e.ctrlKey || e.metaKey) && (e.key === 's' || e.key === 'S' || e.key === 'u' || e.key === 'U')) e.preventDefault();
        if((e.ctrlKey || e.metaKey) && e.shiftKey && (e.key === 'I' || e.key === 'i')) e.preventDefault();
        if(e.key === 'F12') e.preventDefault();
      });

      // Global contextmenu prevent
      document.addEventListener('contextmenu', e=>{
        // allow long-press context on inputs if needed in future
        e.preventDefault();
      });

      // Touch swipe support for popup
      let touchStartX = 0; let touchEndX = 0; let isTouching = false;
      popup.addEventListener('touchstart', (e)=>{
        if(e.touches && e.touches.length === 1){ isTouching = true; touchStartX = e.touches[0].clientX; }
      }, {passive:true});
      popup.addEventListener('touchmove', (e)=>{
        if(!isTouching) return; touchEndX = e.touches[0].clientX;
      }, {passive:true});
      popup.addEventListener('touchend', ()=>{
        if(!isTouching) return; isTouching = false; const delta = touchEndX - touchStartX; if(Math.abs(delta) > 40){ if(delta < 0) showNext(); else showPrev(); }
      });

      // Click outside to close
      popup.addEventListener('click', (e)=>{
        if(e.target === popup) closePopup();
      });

      // Small accessibility: focus trap not implemented but close on Esc handled

      // Preload small set around the current image for smoother nav
      function preloadNearby(idx){
        [idx-1, idx+1].forEach(i => {
          const n = ((i + items.length) % items.length) + 1;
          const im = new Image(); im.src = `UD${n}.jpg`;
        });
      }
      // Hook into image change
      const observer = new MutationObserver(()=>{
        preloadNearby(current);
      });
      observer.observe(popupImage,{attributes:true,attributeFilter:['src']});

      // Optional: in case images are served from a different folder, instruct user in console
      console.info('Gallery loaded. Ensure UD1.jpg ... UD53.jpg are in same folder as this HTML file.');
    })();
  </script>
</body>
</html>
